{"id":"ralph-loop-rcb","title":"Ralph loop creates noisy/false commits - commit count doesn't match actual work","description":"## Problem\n\nThe ralph loop process creates excessive and misleading commits that don't align with actual work done.\n\n### Symptoms\n\n1. **Commit inflation**: A plan with 20 steps might only have 2 actual code edits, but generates 20 commits\n2. **False commit claims**: Commit messages claim work that wasn't done in that commit\n3. **Batched work, split commits**: Agent addresses multiple steps in one action, then makes separate commits for each step with claims that don't match the actual diff\n4. **Docs-only commits sent for code review**: Final commits often contain only planning docs, then Codex reviews and says \"no problems\" when no code was actually changed\n\n### Wasted Builds\n\nThe same problem applies to builds:\n- **Build inflation**: 20 steps triggers 20 builds, but only 2 involve actual code changes\n- **18 of 20 builds wasted**: In the concrete example, 2 builds were meaningful, 18 were pure waste\n- **Time cost**: Each unnecessary build cycle adds latency for no value\n\n### Root Cause\n\nThe loop was mechanically following the task list for commit/build cadence. Each task completion triggered a commit AND a build regardless of whether substantive code work occurred.\n\n## Fix Implemented\n\nAdded **change-aware verification and commit logic** to `cmd_yolo()`:\n\n1. **`has_source_changes()`** - Detects if source code files changed (not just docs/config)\n2. **`has_any_changes()`** - Detects if ANY files changed\n3. **Only build when source code changed** - Skips build for docs-only changes\n4. **Only commit when files actually changed** - No more empty commits\n\n### New Config Option\n\n```bash\n# .ralph/config\n# Customize source file extensions (default covers common languages)\nsource_extensions=swift|ts|tsx|js|jsx|py|rs|go\n```\n\n### Expected Behavior Now\n\n- ✅ Builds only run when `.swift`, `.ts`, etc. files change\n- ✅ Commits only created when there are actual file changes\n- ✅ Docs-only tasks skip build (fast!)\n- ✅ Empty tasks skip commit entirely\n- ✅ Status messages explain what's happening\n\n## Deployment\n\nRun `./install.sh` to deploy the fix.","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-06T18:18:41.244911-06:00","created_by":"dalecarman","updated_at":"2026-01-06T18:41:31.815582-06:00"}
